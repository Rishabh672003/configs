(()=>{"use strict";var e,t={2859:(e,t,n)=>{n(2322),n(3296),n(5334);var o=n(651),i=n(6832),r=n(2667),a=n(6978),s=n(5221);const c="yandex";function u(){return(0,a.mw)(["yandex.com","yandex.ru","yandex.ua","yandex.by","yandex.kz","yandex.uz","yandex.com.tr"],c)}function l(e){if(413===e.status)return void largeImageNotify(c,"8");const t=JSON.parse(e.responseText).blocks[0].params.url,n=`https://${u()}/images/search?${t}`;(0,i.mQ)(n)&&window.location.replace(n)}window.location.pathname.startsWith("/showcaptcha")||(0,a.xU)((async function(e){let{session:t,search:n,image:d,storageIds:p}=e;if(document.head.querySelector('meta[name="apple-mobile-web-app-capable"]')){const e=`https://${u()}/images/touch/search?rpt=imageview&format=json&request={"blocks":[{"block":"cbir-uploader__get-cbir-id"}]}`,t=new FormData;t.append("upfile",d.imageBlob);const n=(0,i.W9)();n.addEventListener("load",(function(){(0,a.bC)(p),(0,a.Pg)(this,l,c)})),n.open("POST",e),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01"),n.send(t)}else{localStorage.setItem("cbir:uploader_onboarded",`{"count":1,"last":${Date.now()}}`);const{selector:e,node:t,layout:n}=await Promise.race([new Promise(((e,t)=>{const n="input.cbir-panel__file-input";(0,r.DY)(n).then((t=>e({selector:n,node:t,layout:"old"}))).catch((e=>t(e)))})),new Promise(((e,t)=>{const n="input.CbirCore-FileInput";(0,r.DY)(n).then((t=>e({selector:n,node:t,layout:"new"}))).catch((e=>t(e)))}))]);"new"===n&&await new Promise(((e,t)=>{const n=(0,o.Z)(),i=function(){window.clearTimeout(r),e()},r=window.setTimeout((function(){document.removeEventListener(n,i,{capture:!0,once:!0}),t(new Error("Search service is not ready"))}),6e4);document.addEventListener(n,i,{capture:!0,once:!0});const a=document.createElement("script");if(["firefox","safari"].includes(s.W9)){const e=document.querySelector("script[nonce]");e&&(a.nonce=e.nonce)}a.textContent=`(${function(e){let t;const n=function(){var i,r,a;(null===(i=window.Ya)||void 0===i||null===(r=i.reactBus)||void 0===r||null===(a=r.e["cbir:search-by-image:start"])||void 0===a?void 0:a.length)>=4?(window.clearTimeout(o),document.dispatchEvent(new Event(e))):t||window.setTimeout(n,200)},o=window.setTimeout((function(){t=!0}),6e4);n()}.toString()})("${n}")`,document.documentElement.appendChild(a),a.remove()})),(await Promise.race([(0,r.DY)(".input_js_inited .input__cbir-button button",{observerOptions:{attributes:!0,attributeFilter:["class"]}}),(0,r.DY)(".input_js_inited button.input__cbir-button",{observerOptions:{attributes:!0,attributeFilter:["class"]}})])).click(),await Promise.race([(0,r.DY)("div.cbir-panel_visibility_visible",{observerOptions:{attributes:!0,attributeFilter:["class"]}}),(0,r.DY)("div.CbirPanel-Popup.Popup2_visible",{observerOptions:{attributes:!0,attributeFilter:["class"]}})]),await(0,a.er)(e,t,d),await(0,a.bC)(p),t.dispatchEvent(new Event("change",{bubbles:!0}))}}),c,taskId)}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,n,i,r)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,i,r]=e[l],s=!0,c=0;c<n.length;c++)(!1&r||a>=r)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(s=!1,r<a&&(a=r));if(s){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[n,i,r]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.j=5999,(()=>{var e={5999:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[a,s,c]=n,u=0;if(a.some((t=>0!==e[t]))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(c)var l=c(o)}for(t&&t(n);u<a.length;u++)r=a[u],o.o(e,r)&&e[r]&&e[r][0](),e[a[u]]=0;return o.O(l)},n=globalThis.webpackChunksearch_by_image=globalThis.webpackChunksearch_by_image||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[5844],(()=>o(2859)));i=o.O(i)})();